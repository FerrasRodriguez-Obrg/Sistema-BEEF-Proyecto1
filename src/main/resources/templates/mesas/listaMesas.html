<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <title>Lista de Mesas</title>
    <head th:replace="~{fragments/layout :: head('Gestión de Mesas')}"></head>

    <style>
        .mx-title { color: var(--tb-azul-oscuro); letter-spacing:.2px; font-weight:700; }
        .btn-tb { background: var(--tb-azul-claro); color:#fff; font-weight:600; border-radius:6px; }
        .btn-tb:hover { background: #0056b3; }
        .card.mx-card { 
            border:1px solid var(--tb-separador); 
            border-top:4px solid var(--tb-azul-oscuro); 
            border-radius:10px; 
            box-shadow: 0 8px 20px rgba(0,0,0,.08); 
            background:#fff; 
        }
        .mx-card .table thead th { 
            background: var(--tb-azul-oscuro); 
            color:#fff; 
            font-weight:600;
            font-size: 0.9rem;
        }
        .mx-card .table tbody tr:hover { background: rgba(0,51,102,.05); } 
    </style>
</head>
<body>
    
    <header th:replace="~{fragments/layout :: header('home')}"></header>

    <main class="container py-5">
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="mx-title h3 mb-0">
                <i class="bi bi-table me-2" style="color:var(--tb-azul-claro)"></i> Gestión de Mesas
            </h1>
            <a class="btn btn-tb" th:href="@{/mesas/nuevo}">
                <i class="bi bi-plus-circle me-1"></i> Nueva Mesa
            </a>
        </div>
        
        <div class="card mx-card">
            <div class="table-responsive">
                <table class="table align-middle mb-0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Capacidad</th>
                            <th>Ubicación</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(mesas)}">
                            <td colspan="4" class="text-center text-muted py-4">No hay mesas registradas.</td>
                        </tr>

                        <tr th:each="m : ${mesas}">
                            <td th:text="${m.idMesa}">1</td>
                            <td th:text="${m.capacidad} + ' personas'">4 personas</td>
                            <td th:text="${m.ubicacion}">Terraza</td>
                            
                            <td class="text-center">
                                <a class="btn btn-sm btn-warning" th:href="@{/mesas/editar/{id}(id=${m.idMesa})}">Editar</a>
                                <form th:action="@{/mesas/eliminar/{id}(id=${m.idMesa})}" method="post" class="d-inline"
                                      th:onsubmit="|return confirm('¿Eliminar la Mesa #${m.idMesa}?');|">
                                    <button type="submit" class="btn btn-sm btn-danger">Eliminar</button>
                                </form>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
    </main>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>