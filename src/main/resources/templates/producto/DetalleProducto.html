<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title th:text="'Detalle · ' + ${producto.nombre}">Detalle Producto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* VARIABLES THE BEEF - MINIMALISTA */
    :root{
      --tb-azul-oscuro:#003366; 
      --tb-azul-claro:#007bff;   
      --tb-blanco:#ffffff;
      --tb-gris-claro:#f8f9fa;
      --tb-gris-fuerte:#343a40;
      --tb-separador:#dee2e6;
    }
    
    body{ 
        background: var(--tb-gris-claro); /* Fondo claro de THE BEEF */
        font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial;
        color: var(--tb-gris-fuerte);
        padding-top: 0; /* Aseguramos que el padding no afecte la barra de navegación */
    }
    
    /* ELIMINAMOS EL ESTILO DE PAPEL PICADO */
    .papel-picado{ display:none; } 
    
    .wrap{
      max-width: 980px; margin: 0 auto; padding: 1.5rem;
    }
    
    /* Tarjeta de Producto Minimalista */
    .panel{
      background: #fff; 
      border: 1px solid var(--tb-separador); 
      border-radius: 12px; /* Bordes más sutiles */
      box-shadow: 0 8px 20px rgba(0,0,0,.08); 
      overflow: hidden;
    }
    
    /* Contenedor de la imagen */
    .img-side{
      min-height: 360px; 
      background:#f8f9fa; /* Fondo muy claro */
      border-right: 1px solid var(--tb-separador); /* Separador sutil */
      display:flex; 
      align-items:center; 
      justify-content:center;
    }
    .img-side img{ width:100%; height:100%; object-fit:cover; }
    
    /* Título del producto */
    .title{ 
        font-family: Poppins, sans-serif; /* Usamos Poppins */
        font-weight:700; 
        color: var(--tb-azul-oscuro);
        font-size: 2rem;
    }
    
    /* Badge (etiqueta) del tipo de producto */
    .badge-tipo{
      background: var(--tb-azul-oscuro); 
      color:white; 
      border:none; /* Eliminamos el borde */
      font-weight:600; 
      letter-spacing:.5px;
      padding: .4em .7em;
      border-radius: 4px;
    }
    
    /* Precio */
    .precio{
      color: var(--tb-azul-claro); /* Precio destacado en azul */
      font-size:2rem; 
      font-weight:800;
    }
    
    /* Botón Volver */
    .btn-volver{
      border:1px solid var(--tb-azul-claro); 
      color:var(--tb-azul-claro); 
      font-weight:600;
      padding: .65rem 1.25rem;
      border-radius: 6px;
      transition: background .2s ease;
    }
    .btn-volver:hover{ background:var(--tb-azul-claro); color:#fff; }
  </style>
</head>

<body>
  <header th:replace="~{fragments/layout :: header('productos')}"></header>

  <div class="wrap my-5">
    <div class="row g-0 panel">
      <div class="col-12 col-md-5 img-side">
       
        <img th:if="${#strings.isEmpty(producto.fotoproducto)}"
             th:src="@{/imagenes/producto/no.jpg}"
             th:alt="${producto.nombre}"
             onerror="this.onerror=null;this.src='https://via.placeholder.com/800x600?text=Sin+imagen'"/>

        <img th:unless="${#strings.isEmpty(producto.fotoproducto)}"
             th:src="@{/producto-img/{f}(f=${producto.fotoproducto})}"
             th:attr="data-file=${producto.fotoproducto}"
             th:alt="${producto.nombre}"
             onerror="
               if (this.dataset.file) {
                 this.onerror=null;
                 this.src = '/imagenes/' + this.dataset.file;
               } else {
                 this.onerror=null;
                 this.src = '/imagenes/producto/no.jpg';
               }"/>
      </div>

      <div class="col-12 col-md-7 p-4 p-md-5">
        <h2 class="title mb-2" th:text="${producto.nombre}">Nombre del producto</h2>
        <span class="badge badge-tipo mb-4" th:text="${producto.tipo}">Platillo</span>

        <p class="lead text-secondary" th:text="${producto.descripcion}">
          Descripción del producto...
        </p>

        <div class="mt-4 mb-4">
          <span class="precio" th:text="'$ ' + ${#numbers.formatDecimal(producto.precio, 0, 'COMMA', 2, 'POINT')} + ' MXN'">$ 0.00 MXN</span>
        </div>

        <a class="btn btn-volver" th:href="@{/listaproductos}">← Volver a productos</a>
      </div>
    </div>
  </div>
  
  <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>